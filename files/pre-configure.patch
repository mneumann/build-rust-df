diff --git a/src/etc/snapshot.py b/src/etc/snapshot.py
index 82302da..34d4e95 100644
--- a/src/etc/snapshot.py
+++ b/src/etc/snapshot.py
@@ -28,7 +28,8 @@ if not src_dir:
   raise Exception("missing env var CFG_SRC_DIR")
 
 snapshotfile = os.path.join(src_dir, "src", "snapshots.txt")
-download_url_base = "https://static.rust-lang.org/stage0-snapshots"
+#download_url_base = "https://static.rust-lang.org/stage0-snapshots"
+download_url_base = "http://www.ntecs.de/downloads/rust"
 download_dir_base = "dl"
 download_unpack_base = os.path.join(download_dir_base, "unpack")
 
@@ -37,6 +38,7 @@ snapshot_files = {
     "macos": ["bin/rustc"],
     "winnt": ["bin/rustc.exe"],
     "freebsd": ["bin/rustc"],
+    "dragonfly": ["bin/rustc"]
     }
 
 winnt_runtime_deps = ["libgcc_s_dw2-1.dll",
@@ -81,6 +83,8 @@ def get_kernel(triple):
         return "macos"
     if os_name == "freebsd":
         return "freebsd"
+    if os_name == "dragonfly":
+        return "dragonfly"
     return "linux"
 
 def get_cpu(triple):
diff --git a/src/liblibc/lib.rs b/src/liblibc/lib.rs
index bbccdf0..ee5c8ce 100644
--- a/src/liblibc/lib.rs
+++ b/src/liblibc/lib.rs
@@ -1086,6 +1086,7 @@ pub mod types {
                 pub type sighandler_t = size_t;
             }
             pub mod bsd44 {
+                use types::common::c95::{c_void};
                 use types::os::arch::c95::{c_char, c_int, c_uint};
 
                 pub type socklen_t = u32;
@@ -1158,6 +1159,17 @@ pub mod types {
                     pub sun_family: sa_family_t,
                     pub sun_path: [c_char, ..104]
                 }
+                #[repr(C)]
+                pub struct ifaddrs {
+                    pub ifa_next: *mut ifaddrs,
+                    pub ifa_name: *mut c_char,
+                    pub ifa_flags: c_uint,
+                    pub ifa_addr: *mut sockaddr,
+                    pub ifa_netmask: *mut sockaddr,
+                    pub ifa_dstaddr: *mut sockaddr,
+                    pub ifa_data: *mut c_void
+                }
+
             }
         }
 
diff --git a/src/snapshots.txt b/src/snapshots.txt
index 359b253..a2256d5 100644
--- a/src/snapshots.txt
+++ b/src/snapshots.txt
@@ -1,5 +1,6 @@
 S 2014-09-05 67b97ab
   freebsd-x86_64 5ed208394cb2a378ddfaa005b6298d2f142ad47f
+  dragonfly-x86_64 f81b1acfb5251c7ce9120a0c948c9ef1ce3b67a2
   linux-i386 d90866947bfa09738cf8540d17a8eedc70988fcc
   linux-x86_64 52955b8f7a3b1bf664345060f421101979ced9f2
   macos-i386 2a38d39afa94ad6d274464ee4e82b1b98c2b3a11
@@ -8,6 +9,7 @@ S 2014-09-05 67b97ab
 
 S 2014-08-29 6025926
   freebsd-x86_64 285330b798eefcc929fc94c9d0604b6172ce3309
+  dragonfly-x86_64 87b7d3d21de83dfe4c66a77fe7d3b85f14d97cf7
   linux-i386 5b57ab2dc32952dc78551a955f3c1746b2d915a3
   linux-x86_64 2624aeac3fe1b2359b61c1109e4708680e237ca5
   macos-i386 deffce32408b023bcda84f6ce338ca3de02f406b
